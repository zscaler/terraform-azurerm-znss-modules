# Azure Virtual Machine Module

A Terraform module for deploying a virtual machine in Azure cloud. This module is intended to be an internal one that can be leveraged during proof of concepts and demos.

The linux flavour cannot be controlled, as the virtual machine uses an attached managed disk provided by Zscaler based on `FreeBSD`.

## Usage

```hcl
module "vm-znss" {
  source = "../../modules/vm-znss"

  location            = var.location
  resource_group_name = azurerm_resource_group.this.name
  name                = var.vm_name
  avzones             = var.avzones
  storage_account_name = var.storage_account_name
  containers_name      = var.containers_name
  blob_name            = var.blob_name
  interfaces = [
    {
      name             = "Zscaler-NSS-MGMT-First"
      subnet_id        = lookup(module.vnet.subnet_ids, "public", null)
      create_public_ip = true
    },
    {
      name             = "Zscaler-NSS-MGMT-Sec"
      subnet_id        = lookup(module.vnet.subnet_ids, "public", null)
      create_public_ip = true
    },
  ]
  depends_on = [
    module.bootstrap
  ]
}
```

## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | >= 0.13.7, < 2.0.0 |
| <a name="requirement_azurerm"></a> [azurerm](#requirement\_azurerm) | ~> 2.64 |

## Providers

| Name | Version |
|------|---------|
| <a name="provider_azurerm"></a> [azurerm](#provider\_azurerm) | ~> 2.64 |

## Modules

No modules.

## Resources

| Name | Type |
|------|------|
| [azurerm_network_interface.this](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/network_interface) | resource |
| [azurerm_network_interface_backend_address_pool_association.this](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/network_interface_backend_address_pool_association) | resource |
| [azurerm_public_ip.this](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/public_ip) | resource |
| [azurerm_virtual_machine.this](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/virtual_machine) | resource |
